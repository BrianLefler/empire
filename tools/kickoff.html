<html>
	<head>
		<script src="../frontend/server.js"></script>
		<script>
			function postFormStartLobby() {
				let gameId = parseInt(document.getElementById("gameIdLobby").value);
				let numPlayers = parseInt(document.getElementById("numPlayers").value);
				
				let req = new XMLHttpRequest();
				req.open("post", g_server + "/entry/startlobby?gid=" + gameId, true);
				req.onerror = function (e) {
					window.alert(req.status);
				};
				req.onload = function (ev) {
					window.alert(req.status);
				};
				req.send(JSON.stringify({
					"players": numPlayers
				}));
				return false;
			}

			function postFormStartWorld() {
				let pw = document.getElementById("gmPassword").value;
				let pw2 = document.getElementById("obsPassword").value;
				let gameId = parseInt(document.getElementById("gameId").value);
				
				let req = new XMLHttpRequest();
				req.open("post", g_server + "/entry/startworld?gid=" + gameId, true);
				req.onerror = function (e) {
					window.alert(req.status);
				};
				req.onload = function (ev) {
					window.alert(req.status);
				};
				req.send(JSON.stringify({
					"gm_password": pw,
					"obs_password": pw2
				}));
				return false;
			}
		</script>
	</head>
	<body>
		<h1>Start Lobby</h1>
		<form onsubmit="return postFormStartLobby();">
			<label>Game ID: <input id="gameIdLobby" type="number" value="0"/></label>
			<label>Number of Players: <input id="numPlayers" type="number" value="26"/></label>
			<button>Create Lobby</button>
		</form>
		<h1>Start Game</h1>
		<form onsubmit="return postFormStartWorld();">
			<label>GM Password: <input id="gmPassword" type="password"/></label>
			<label>Observer Password: <input id="obsPassword" type="password"/></label>
			<label>Game ID: <input id="gameId" type="number"/></label>
			<button>Start</button>
		</form>
		<h1>Advance Game</h1>
		<div id="advances"></div>
		<script>
			for (let i = 1; i < 30; i++) {
				let f = document.createElement("form");
				f.setAttribute("action", g_server + "/entry/advanceworld?gid=0&t=" + i);
				f.setAttribute("method", "POST");
				let b = document.createElement("button");
				b.appendChild(document.createTextNode("Advance game 0 turn " + i));
				f.appendChild(b);
				document.getElementById("advances").appendChild(f);
			}
		</script>
	</body>
</html>
